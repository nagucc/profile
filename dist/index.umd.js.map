{"version":3,"file":"index.umd.js","sources":["../src/Profile-mongo.js"],"sourcesContent":["/*\n根据微信企业号的userid记录用户的相关信息\n字段包括：_id, userid, roles, name, isMale, phone\n */\n\nimport { useCollection } from 'mongo-use-collection';\n// import { mongoUrl } from '../../config';\n\n\nexport default class Profle {\n  constructor(url, collection = 'profles') {\n    this.useProfiles = cb => useCollection(url, collection, cb);\n  }\n\n  /*\n  添加profile\n   */\n  add(profile = {}) {\n    return new Promise((resolve, reject) =>\n      this.useProfiles(async col => {\n        try {\n          const result = await col.insertOne(profile);\n          resolve(result);\n        } catch (e) {\n          reject(e);\n        }\n      }));\n  }\n  getByUserId(userid) {\n    return new Promise((resolve, reject) =>\n      this.useProfiles(async col => {\n        try {\n          const doc = await col.findOne({ userid });\n          resolve(doc);\n        } catch (e) {\n          reject(e);\n        }\n      }));\n  }\n  get(_id) {\n    return new Promise((resolve, reject) =>\n      this.useProfiles(async col => {\n        try {\n          const doc = await col.findOne({ _id });\n          resolve(doc);\n        } catch (e) {\n          reject(e);\n        }\n      }));\n  }\n  update(_id, profile = {}) {\n    return new Promise((resolve, reject) =>\n      this.useProfiles(async col => {\n        try {\n          const oldDoc = await this.get(_id);\n          const doc = {\n            ...oldDoc,\n            ...profile,\n          };\n          await col.updateOne({ _id }, { $set: doc });\n          resolve(doc);\n        } catch (e) {\n          reject(e);\n        }\n      }));\n  }\n  remove(_id) {\n    return new Promise((resolve, reject) =>\n      this.useProfiles(async col => {\n        try {\n          const result = await col.remove({ _id });\n          resolve(result);\n        } catch (e) {\n          reject(e);\n        }\n      }));\n  }\n }\n\n// const PROFILE_COLLECTION = 'profiles';\n\n// const dao = new WxeProfle(mongoUrl, PROFILE_COLLECTION);\n// export default dao;\n"],"names":["useCollection"],"mappings":"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"}